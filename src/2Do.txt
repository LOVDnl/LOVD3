Prioritize:
===========
- (@Ivo) Na deze commit, de volgorde van de kolommen in de inc-sql-columns.php goed zetten; nu niet gedaan omdat ik al een flinke diff heb.
- Opmerkingen Johan:
  + Menu's moeten met GET geladen worden, zodat je terug kunt naar GET (terug in browser, POST warning, refresh geeft nieuwe individu entry!)
    * Formulieren moeten dan ook een Cancel knop krijgen, waarmee je terug kunt naar het keuze menu.
    * Formulieren in submit.php?

- Als David Baux zijn scripts klaar zijn, mergen met trunk.
- Na het uploaden van de head1000 VCF file, kreeg ik een wit scherm (geen individual data gesubmit).
  + Ik kan dit niet bevestigen op mijn LUMC install.
- De kolom volgorden en omschrijvingen verder overnemen van de shared install - afmaken.
- (@Ivo) Row Link probleem:
  + Every object needs a variable, indicating where the rowlink needs to be implemented as an HTML anchor; id_ == default.
    * Currently, Object::prepareData() puts the link in every id_ column it can find.
  + We NEED to have a better way to get the row_id & row_link to work. It has become quite a mess and often difficult to work with or debug!!!
  + Objects::viewList() heeft sinds kort code voor het invullen van $zData['row_id'] en aanverwanten. De prepareData() functies kunnen daarom ingekort worden.
- (@Ivo) Link van /view/GENE moet naar individu indien aanwezig, anders variant.
- (@Ivar) Combined viewList toevoegen onder andere viewEntries, overal waar er viewLists zijn van varianten even kijken welke daar het beste kan staan.
- (BELANGRIJK) Van alles moet bepaald worden wat de minimale level is die benodigd is.
        ^ Views/Actions checken op user level requirements:
            v Users
            % Genes
            % Diseases
            % Transcripts
            % Individuals
            % Phenotypes
            % Screenings
            % Variants
        ^ Alle standaard kolommen checken voor ieder level:
            v Users
            % Genes
            % Diseases
            % Transcripts
            % Individuals
            % Phenotypes
            % Screenings
            % Variants
  + (@Ivar) De hele submissie code moet worden gecontroleerd, of de rechten wel goed zijn. Een submitter moet OWNER zijn van de data, om daar iets aan toe te voegen.
    * Curatoren krijgen rechten via ownership of via de genen (varianten van individu). Hier hetzelfde: als isAuthorized rechten geeft op de target/parent, dan mag je toevoegen.
  + Testen wat public / curator wel en niet mag.
  + Ook als knopjes niet zichtbaar zijn, of de pagina zelf 'm ook blokkeert.
- (@Ivar) Als curatoren iets veranderen, moet er ook gemailed worden! Ook aan de collega's! Ook aan de data owner! Iedereen moet gewoon altijd overal over gemailed worden.
- Gene headers & footers implementeren? Staat al wel omschreven in de manual.
- Gene notes for variant listings implementeren? Staat al wel omschreven in de manual.
- Curator mag alleen phenotype kolommen verwijderen, als er geen data meer in zit bij entries van deze ziekte (managers wel).
  + De curator hoeft namelijk niet per se rechten te hebben op alle patienten met deze ziekte.
- Een curator mag ziektes aanmaken en editen.
- (@Ivo) DATA DOWNLOAD.
  + URLs left to implement:
    * Alle data van een bepaald gen downloaden (curator and up):
      - /download/all/gene/GENE
      - We moeten dan zien te achterhalen welke individuen bij dit gen horen, en welke ziektes.
        Phenotype data van andere ziektes moeten niet gedownload worden, omdat de curator sowieso de rechten niet heeft die data weer terug te importeren.
        De custom columns moeten nu ook beperkt worden.
    * Alleen bepaalde data downloaden (manager and up):
      - /download/individuals,phenotypes      (voorbeeld)
      - Hier ook restrictie kunnen leggen?
    * We zullen in de toekomst wel toestaan dat voor dit format een selectie van de data wordt gedownload, maar
      dat moet dan maar op basis van de geselecteerde IDs die in SESSION worden opgeslagen. Ik wil niet code voor
      het parsen van zoektermen moeten kopieëren naar download oid.
  + How does the public make downloads?
    * Link from the gene homepage?
    * Link from the viewList, after applying search terms, just like in LOVD2?
      - But then, you need to control the viewList from that button, such that the search terms are correct, OR the button is provided by the viewList.
  + DATA IMPORT
    * Choose character set!
      - Macintosh input files werken niet goed; heeft http://nl2.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings
        nodig... dat werkt vanaf 4.3.0... Alleen laden met config_import.txt?
        Testfile heb ik in mijn email, van David Bonthron (Wed, 18 Jun 2008 12:28:46 +0100).
    * Alle velden moeten getrimmed worden voordat er naar gekeken wordt.
    * Import duidelijk anders doen. Overschrijven toestaan indien aangevinkt; scheelt veel tijd en een tijdelijk lege database.
      - Dat moet dan ongelofelijk goed gecontroleerd worden!!!
      - Store in session / DB in een col met serialized data?
    * Daarna: we moeten ergens een tekst zetten waarop staat dat als je als submitter een hoop varianten wil submitten dat je dan ook contact kunt opnemen met de curator, zodat hij/zij deze via een upload kan importeren.
- Mapping melding (successfully mapped xxx variants slaat nergens op)
- Dropdown menu's op de overige VE's ook inbouwen.
- VariantOnGenome/Times_reported (or similar)
  + Iedere variant die gevonden wordt in de panel moet dan apart geteld worden, door middel van het "VariantOnGenome/Times_reported" veld (eventueel
    "VariantOnGenome/Chromosomes_reported" of "VariantOnGenome/Found_on_chromosomes" of ...). Hier moet het aantal chromosomen worden ingevuld, waar de
    variant is gevonden. De frequentie is dan uit te rekenen volgens: "VariantOnGenome/Times_reported" ÷ (Individuals "panel_size" * 2)
    Misschien beter niet chromosomen, maar personen, zoals ook de panel? Aantal chromosomen kan afgeleid worden van variant chromosoom (autosomaal?),
    Individual/Gender en VOG/Allele instellingen?
    * Behalve bij geslachts-gemengde groep! Maar zijn er wel dat soort groepen, als het om geslachtschromosomen gaat?
      - Misschien enkel problemen als paper zegt gevonden in X/Y chromosomen?
  + Om aan te geven dat een variant niet gevonden is in een controle groep, kan men de "Variant/Times_reported" op 0 zetten, maar dan alleen als de
    Individuals "panel_size" groter dan 1 is (dus dat mag niet in een individu, alleen een panel).
  + LOVD kan nu altijd simpel het aantal gevonden varianten tellen aan de hand van de Variant/Times_reported kolom.
- Add Individual/Parents/Father and /Mother, but probably not as custom columns? We don't want to deal with these cols in the data entry forms I think.
- Curator/Manager moet cols kunnen instellen voor disease Healty/Control.
- Individual viewList: add column "variants in genes" with gene symbols.
  + Then, add option to dropdown menu if we have a currdb.
  + After that, change the default link when clicking the individual tab.
  + Then, apply the same to screenings (add column "genes screened", add option in tab menu, change default link).
- Unieke variant met niet-unieke DBID: edit geeft foutmelding, maar de auto suggest is dezelfde ID. Wat moet er anders?
- (@Ivar): Als een VCF file geen varianten bevat, mag de file niet als volledige submissie gezien worden.
  + Met andere woorden, de data in $_SESSION moet zo gemanipuleerd worden in variants.php na het importeren, dat er geen mail wordt gestuurd met info over alleen een lege file.
  + Misschien moeten we wel toestaan, dat er in een volledige submissie met individual e.d. een melding over de lege file komt (er moet dan sowieso gemailed worden).
  + Ik heb wel wijzigingen aan de code aangebracht, maar mijn kennis van de submissie SESSION array is niet groot genoeg om snel te zien hoe ik dit aan pas zonder andere nare effecten.
  + Er zijn hiervoor twee FIXME's toegevoegd.
  + Wellicht is het makkelijker gewoon een foutmelding te geven als in: geen varianten gevonden, upload een correcte file?
    * Tenslotte gaat het niet over managers, de individu en/of screening is vast al publiek.
  + Overleg?
=============== Below here needs to be re-evaluated for priority ===============
- Kunnen we ook het Exon veld voorspellen?
- Quick curate option?
- Per variant de mapping opties kunnen veranderen?
- Connect existing variant to existing individual; kies individual via viewlist in new window, daarna kies screening?

- Beta-09:
  - Submit a variant that has already been reported (zoals in LOVD 2.0 met auto complete, of viewList?)
  - Een submitter moet voor 't publiek zichtbaar zijn (in Reference veld, of created_by of owned_by dan toch toevoegen?)
  - Een ingelogde gebruiker hoort een grote melding te zien dat er stored submissions zijn, en hij hoort deze te kunnen bekijken.
    + Sowieso moeten submissies bekeken kunnen worden; "My submissions", zoals in LOVD 2.0.
  - (@Ivar) Als Mutalyzer van een variant de posities niet kan isoleren, gebruik dan de fallback LOVD 2.0 code.
  - (@Ivar) Fix transcript position numbers (change code gene create, verzin manier om alle waardes weg te gooien en opnieuw te berekenen)
    + Hierna kan de transcript ViewList voor nieuwe VOT op bestaande VOG specifieker worden geselecteerd.
  - Johan wil dat we bij de redirect("Successfully created *****") een knop zetten. Er moet dan een tekst staan met "You are being redirected, if not you can click here". Schijnbaar werkt de redirect soms niet.
    + Redirect: zouden we dan misschien een functie moeten maken? Code voor een knopje met redirect (JS lijkt me het handigst?) in een lovd_showInfoTable() is dan best wel weer lang.
  - HGNC niet te bereiken? Nette foutmelding of mirror gebruiken?
  - Gene create: diseases van OMIM mirror van LOVD.nl ophalen?
  - (Ivar) Diseases: zit er een check op, dat er maar 1 OMIM ID mag worden aangemaakt? Code level?
  - "Does not accept external submissions" setting? Dat moet dan ook worden doorgegeven, zodat de LOVD/LSDB lijst dat kan aangeven.
    + Apart veld, niet in data.
  - Werk verder aan manual (eerst alleen nog PDF).
  - Curators should have a nice overview per gene which columns can still be added one specific gene, like LOVD 2.0 had.
  - Nu dat inc-init.php de $_PE[1] pad, moeten we even kijken naar wat doen we met alle code overal die $_PE[1] pad en aan nID toewijst.
    + Alleen padding code weghalen, en toewijzing laten, of zelf $nID en $sID toewijzen in inc-init.php?
  - Check_update: install_name -> db_name, install_dir -> db_url, tel admin en managers etc mee als submitters.
  - Johan wil homozygote varianten opslaan als 2 entries, omdat hij verschillende waardes voor Variant/Genetic_Origin wil kunnen kiezen.
    + Dat heeft een aantal nadelen:
      * De tweede variant moet actief verborgen worden.
      * Je kunt niet goed meer zoeken naar homozygote varianten.
      * Extra data opslag.
    + Voordelen:
      * Variant tellingen gaan automatisch goed, als je tenminste vindt dat het er 2 moeten zijn.
    + We willen dit eigenlijk op een andere manier oplossen. Variant/Genetic_Origin als bit column gebruiken?
      * Dit zou gerelateerd kunnen zijn aan een ander probleem wat we hebben: de LOVD2 c.0, c.= en c.? notaties.
        - Hier misschien toch een extra kolom voor?
        - Maak lijst van welke waardes samen moeten kunnen komen;
          + Tweede allel WT / niet bekeken / verloren / homozygoot
        - Het moet goed te tellen zijn (frequenties!)
        - Wel/niet tonen = instelling?
  - Should we maybe set default_socket_timeout somewhere?
  - Overstappen naar de JSON API - kiezen van een JSON lib (ZEND?)
    + In het geval dat we de browser direct de calls en de interpretatie willen laten doen, hebben we een wrapper script in PHP
      nodig die de calls doet en de JSON controleert (indien we een foutmelding krijgen, een JSON object maakt) en alles doorstuurt.
  - Inbouwen dat LOVD met NR_ accession nummers overweg kan, er staan hier en daar volgens mij wat regex checks op NM_(ajax calls e.d.)
  - RNA prediction toevoegen aan het variant create & edit formulier.
  - Als $zData['column_'] niet defined is, pakt viewList en viewEntry automatisch $zData['column']? Dat staat ons wat "sloppy" code toe, waar we icoontjes toevoegen speciaal voor text/html, maar dat niet willen voor downloads of XML.
  - Vanaf individual page, phenotype toevoegen, waarom niet terug naar de individu?
    + Op zich OK om op de phenotype pagina te zitten, maar het is niet duidelijk genoeg hoe je nu terug komt naar de individu.
  - Vanaf individual pagina, zonder phenotype, kun je bij de (lege) viewlist van phenotypes niet een phenotype toevoegen.
  - lovd_setUpdatedDate() implementeren.
  - Gene create -> (OMIM API) Auto create related diseases -> (OMIM API or HPO files) Auto create custom columns
  - Disease create -> (OMIM API or HPO files) Auto create custom columns
                   -> (OMIM API) Auto create related genes
  - If the wrong password is provided 3(?) times on data entry forms, log this and include a delay (store in SESSION), such that the password can't be brute forced.

Opmerkingen Johan:
  + Diseases selecteren bij patient moet makkelijker worden, en er moet een voorspelling in zitten afhankelijk van het gen waar je nu in zit.
    * Dat wordt dan waarschijnlijk een tag JS library, die in combinatie met een autocomplete de klus zou moeten kunnen klaren.
      - Maar dan moet die wel snel genoeg zijn en je de mogelijkheid geven om met "muscular dystrophy" ook "dystrophy, muscular, duchenne" te vinden.
      - We willen natuurlijk liever niet zelf een JS lib hiervoor maken.
      - Opties:
        + Tag-it! : https://github.com/aehlke/tag-it
        + Tagit   : http://webspirited.com/tagit/?theme=simple-blue
        + Tags Input : http://xoxco.com/projects/code/tagsinput/
        + Tag edit   : http://tagedit.webwork-albrecht.de/playground.html
  + Als je een screening aanmaakt terwijl je in gen X zit, moet die standaard geselecteerd zijn?
  + Kunnen we de haakjes uit de protein description halen, als het RNA veld is ingevuld?
    * Eigenlijk zouden we dat uit de screening info moeten halen, natuurlijk.
  + Er is onenigheid over hoe vaak je moet vragen naar de Functional effect.
    * Mijn suggestie is de naam van de VOT effect kolommen te veranderen naar "Effects function of this transcript".
      - De VOG functional effect kolommen verdwijnen dan, en worden op de achtergrond automatisch ingevuld voor de "hoogste" waarde in de VOT kolommen.
    * Johan zegt echter, dat hij één set velden per variant genoeg vindt (alleen de VOGs dus).
      Hij is het niet eens met mijn mening dat je per transcript moet kunnen zeggen of de functie beïnvloed wordt.
- Waarschuwing voor MySQL type verandering alleen doen als echt het type verandert en/of de lengte minder wordt?
- (@Ivo:) Indien geen kolommen actief zijn voor aandoening en/of gen, geef aan hoe dat te fixen vanaf het object z'n columns VL. ViewList zou count(*) terug moeten geven, waarna de code kan weten dat er blijkbaar niets te tonen was.
- Mapping script moet nog genen aanmaken na VCF import, als de HGNC geen transcripten weet.
  * Of betekent dit, dat Mutalyzer er sowieso niet mee overweg kan?
- Met betrekking tot het blokkeren van het aanmaken van niet volledig bekende genen:
  + Nadat Mutalyzer komt met een test op alle genen(sliceChromosomeByGene, getTranscriptsAndInfo, numberConversion per gen 1 variant) moeten we
    beslissen wat we ermee gaan doen, nu tijdelijke filter op "rare" LocusType's.
- Incorporate links to Alamut.
- VOT/Published_as is op zich niet nodig als VOG/Published_as is toegevoegd. Hier dan ook een stokje voor steken?
- Als send_stats uit staat, heeft include_in_listing weinig zin...
- Gene removed, refseq files deleted?
- Unit tests via Selenium (of alternatief)?
- Hebben we OpenSSL ergens voor nodig?
  + http mutalyzer contact als zelf in https???
- Orphanet links toevoegen: meteen ID kolommen omzetten in 'n grote bitwise kolom?
- Johan: 2011-08-18: een ontwikkeling die ik momenteel zie is dat submitters bereid zijn alle varianten verbonden aan één patient te submitten,
  maar wel zelf willen kunnen zien welke varianten allemaal bij die patient horen maar niet dat anderen dat kunnen zien (database bezoekers).
  De reden daarachter is privacy.
  + Hoe is dit simpel te realiseren ?. Is het mogelijk een button toe te voegen waarmee je aangeeft of in LOVD displays het wel/niet is
    toegestaan dat bezoekers alle varianten gekoppeld aan een patient krijgen te zien ?. De submitter (of curator) krijgt na inloggen dan
    wel alle varianten gekoppeld aan een patient te zien.
    * De ViewList zou dan naar de VOG/VOT ViewEntry moeten wijzen, die zou dan geen link naar individual mogen hebben.
    * De ViewList zou wel de individu informatie mogen tonen, toch?
    * De Individual ID zou wel op een bepaalde manier verborgen moeten worden.
      - De ViewEntry van de Individu zou dan ook niet-public moeten zijn.
    * Ivar: Is het niet zo dat als je de Individual op non-public zet, dat je dan ook de link naar de varianten kwijt bent, maar de varianten
            nog wel gewoon kunt bekijken? Met als resultaat dat de variant informatie publiekelijk beschikbaar is, maar dat het niet te herleiden
            is naar de Individual in kwestie.
    * Ivo: Is afhankelijk van in hoeverre de individu informatie toch nog moet worden getoond.
- Iets als check_update, maar dan check_news.php. Wordt gerund iedere keer als men inlogt. Maakt gebruik van Atom feed of tab delimited en presenteert nieuws (jQuery!)
  + Ook support mededelingen: voor versies alpha-01 t/m alpha-10 het bericht dat alpha niet meer ondersteund wordt, dus je moet upgraden. Of voor alle installs op onze server (signature check): downtime dan en dan. Op versie of op signature??? Zoiets.
  + Ook instellen per user level (submitter, curator, manager, db admin).
  + Na het inloggen, indien er een update is, een tooltip weergeven rechtsonder dat er een update is! Niet de hele tijd dus, alleen nadat je net bent ingelogd.
    * Je kunt $_STAT gewoon analyseren, want het icoon is al geladen tijdens het inloggen dus hoort al te weten dat er een update is!
    * Popup heeft andere kleur aan de hand van update belangrijkheid...
    * Kan popup zo'n hoekje hebben die naar het logo wijst?
- Vanaf stable moeten bij bugfixes de datum en versie gezet worden.
- User curator maken voor >1 gen in 1 keer: nieuw form!
  + Popup van zijn viewEntry; alleen genen tonen waar hij GEEN curator voor is, geef twee vinkjes: wel/niet edit, wel/niet zichtbaar.
  + Remove als curator: apart van add, geen vinkjes.
- (~BELANGRIJK) Misschien beter een inc-js-lib-init.php o.i.d. te maken, omdat we nu al openWindow en toggleVisibility hebben, en dat zijn al twee JS calls. Vertraagt LOVD.
- <OPTGROUP label="groep"><OPTION value="asdf">asdf</OPTION></OPTGROUP> voor custom link active for columns selection?
- Custom View:
  * The full data overview moet nog de varianten tonen, die óók in de individu gevonden zijn.
- Newline in naam submitter bij register -> Header injection??? Waar hiertegen beschermen? In objects.php, dat in normale text velden geen newlines mogen zitten?
  * Maar ook met dubbele quotes in de naam gaat mis; speciaal dit veld opschonen of meer? Hoe?
- Delete user verder ontmoedigen?
- LOVD 3.0 heeft libxml nodig voor REST2SOAP, én we zitten nu op PHP >= 5.1.0, hebben we dan wellicht niet sowieso extra interessante mogelijkheden?
- Ensemble gene ID opslaan en leiden naar: http://www.ensembl.org/Homo_sapiens/Gene/Summary?g=ENSG00000073734
- Het is niet duidelijk wat object_id nu precies is (gene symbol of disease id, bedoeld om te bepalen welke cc actief zijn)
  - Ook id is niet echt duidelijk (dit is eigenlijk de foreign key van de entry (variantid, individualid), bedoeld om te bepalen welke cc actief zijn)
- CUSTOM VIEWLISTS:
  * URLS:
    - /view     -> MAPPING TO /view/variants+screenings+individuals+phenotypes
    - All the traffic to variants and individuals in LOVD 2.0 enters through variants.php, lucky me. So this file in 3.0 will both serve the "new" clean URLs, but if it detects the old LOVD 2.0 formatted URLs, it will forward to the standard URL.
- (@Ivo) genes?authorize : Gebruikers mogen geen gelijke users rechten ontnemen. Bouw die check in op query niveau.
- Er mogen geen 2.0 opmerkingen meer in LOVD 3.0 staan.
- When disease is created, forward user to select columns for this disease.
- Variant/allele -> Variant/Phase?
- In individual viewList: lijst genen meest gemuteerd?
- Als account gelocked wordt, moet er naar de gebruiker die gelocked is, gemailed worden.
- Raar: /genes/DMD?authorize -> click alle users aan -> resort viewList.
- Use uniqid() ipv lovd_generateRandomID()?
- Deinstalleren moet gewoon altijd werken. Als de foutmelding "foreign key constraint fails" opduikt bij het removen, moet LOVD gewoon opnieuw proberen of misschien in een andere (random??) volgorde of misschien de tabel die de fout triggered achteraan zetten en opnieuw proberen.
- Geheugengebruik hoog vanwege session: Ook fix nodig voor viewList data? Blijft ook hangen.
- Bij installatie controleren of er een mailserver is? Poort 25 check?
- Bij aanmaken gen en geen LRG, wel check of LRG bestaat voor pending? (LRG webservice)
  * Dan op een bepaalde manier de curator van op de hoogte stellen?
  * Bij gebruik LRG webservice: Pontus: "Should a key be leaked or stolen in a way so that it is misused, we may need to reserve the right to ban that key. In that case, you would perhaps want to implement some way of redistributing new keys to the LOVD installations..."
    Me: "I see - in that case I can't hard-code it in, but need to store it in the database somewhere. However, anyone wanting to abuse the system could easily find out the new key. So if somebody really does want to do harm, it's quite impossible to lock them out *without* locking LOVDs out, unless you would introduce per-LOVD keys and match each key with a certain IP address..."
- (@Ivo) De Oostenrijkse DB sluit:
  http://grenada.lumc.nl/LSDB_list/lsdb.php?action=view_all&symbol_start=DHCR7
  (zie email van 9 jan)
- Columns hiden door Javascript -> instant hide. Kolommen een class mee geven daarvoor.
- De inc-init moet toch een autocommit hebben? waarom staat dat niet aan?
- Mutalyzer webservice "Ping" module ergens in REST2SOAP ofzo integreren, zodat meteen kan worden gechecked of mutalyzer gewoon up is.
- API.
- ORCID integratie.
- How to store functional assays? Functional effect screenings? Separate table, with DBID or something to link to variant in general? Chr,g_pos?
  + Als linken naar een variant (of iemand zegt: ik heb DEZE variant getest), wat doen we dan als de variant wordt bewerkt?
  + Moet ook kunnen linken naar meerdere varianten, als deze tegelijkertijd zijn getest.
  + Must be able to store phenotype like information (not individual-like)
- Since Objects::checkFields() is running getForm(), can't that code take care of invalid values in selection lists? Now that code is all over the place; object_custom for custom columns and lots of object_* files for each data type.
- Floating header? Anders: eerst de hele tabel inladen, daarna nieuwe table maken, de TR moven naar de andere tabel met behoud van breedte, en laten floaten.
  + Eventueel code gebruiken gesuggereerd door Ivar (november 2011)
  - Implement lovd_getColumnMaxValue() in inc-lib-init.php.
- SeattleSeq import: in welke kolom worden de dbSNP links geladen? Is nu nummerieke select, moet text values worden.
- Mapper geeft query error als VOT DNA veld niet actief is: ondervangen? Ivar: Nee, moeten ze maar niet met de database kloten...
- Default values bij alle edits, waar de $zData gegevens in $_POST geladen worden, kan met 1 array_merge(), zodat je niet hoeft te loopen. /genes/GENE/columns/DNA?edit doet het goed.
- Add viewlist menu also on other pages? viewlists within viewentries? phenotypes for instance, can't be downloaded yet.
- Wat moet LOVD kunnen met LRGs? Doorsturen i.p.v. UD nummers (= NC slice) bij name checker e.d.? Idem NGs?
- When finishing the data type wizard, it should show what your created field looks like. You then get the option to agree (OK&close), or revise these settings (restart, remembering values).
- Nadat we eenmaal grafieken hebben ingebouwd (David Baux), kunnen we ook automatisch grafieken inbouwen als je meer dan
  1 phenotype entry hebt van een bepaalde aandoening, en er numerieke kolommen in voorkomen.
  + De data kan dan worden geparsed (viewList moet array terug geven ipv count, die gebruiken we toch niet) zodat leeftijd of datum horizontaal,
    en numerieke kolommen (blood pressure, length, etc) verticaal kunnen. Per kolom een aparte grafiek?
- Be able to change the mapping setting of a certain variant?
- Legend moet nog gemaakt worden; mouseover column of column header?
  + Hoe dan ook, moet de full legend nog steeds een aparte file zijn.
- De afhandeling van text/plain voor de verschillende levels voelt nogal fragiel aan, en is behoorlijk irrirant om door te hebben.
- Find & Replace:
  + Een viewList, met daarboven heel compact het formulier voor de Find & Replace
  + De voorgestelde verandering is direct zichtbaar gemarkeerd in de viewList (wordt gedaan in PHP/Prepare data), die ze kunnen sorteren, navigeren, etc.
    * Wellicht niet extra doorzoeken, want dan krijg je verschil DB inhoud/wat je op het scherm ziet.
  + Allowing full regexp mode where you can build your own regular expression; submitting the form will first return
    * all changes that will be made to the database, agreeing will actually perform the find & replace.
    * This is related to the "asterisk wildcard" question of Raymond Dalgleish, April 2010.
From LOVD 2.0:
  + The error message that is shown if a gene symbol is passed to LOVD that does not exist in the database, now suggests an URL where the gene database might be found.





MOET OVERLEGD WORDEN:
=====================
- Zwakkere koppeling tussen individu en disease?
  * Link IND2DIS: "proven"/"presumed" flag?
- (BELANGRIJK) Allele => Gametic Phase? Check alle waardes in de groep.
- Hoe kunnen we toch toestaan, dat users voor een grote groep genen tegelijk curator kunnen worden gemaakt?
  * Probleem vergeleken met LOVD 2.0 is dat je allow_edit en shown ook moet kunnen bewerken... Of kunnen we daar omheen werken?




Doen voordat LOVD 3.0 online gebruikt kan worden:
=================================================
- (Ivo) Stress test??? Als het datamodel écht moet worden aangepast, kan dat wellicht niet goed via inc-upgrade.php.
  * Concurrent users testen! Normale overviews, hoeveel users kan het aan? Is dit wel LOVD specifiek of misschien teveel op de hardware?
  * Gebruik om dit te testen Apache benchmarks? Wordt gebruikt om Apache aan te roepen, schijnt heel handig te zijn.
  * Waarom is de interface traag maar een simpele query niet? Top? Query incl.  joins in MySQL runnen?





Data transfer LOVD 2.0 -> LOVD 3.0:
===================================
- Submitters and users should be imported separately. Their IDs will change, and multiple LOVD 2.0 installs can come together in one LOVD 3.0.
- Genes and transcripts need to be imported, or regenarated, in LOVD 3.0 separately.
- Idem diseases?
- The rest of the data then should go in a LOVD 3.0 format.
- To make life easier for the users:
  + Can the new LOVD 3.0 install not ask for the LOVD 2.0 install location, download gene, disease and transcript info, then possibly ask for its admin account, and download the rest of the data?
  + Alternatively, from LOVD 2.0 you could have the user generate an ID, LOVD 3.0 then somehow receives this ID, and logs into the LOVD 2.0 installation to retrieve data (or LOVD 2.0 sends it).
  + For all of this, the LOVD 2.0 does need to be accessible for the LOVD 3.0 install.





Ook belangrijk, maar iets minder:
- LOVD bepaalt of je met Ajax wel of niet een resource mag benaderen?
  + http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing
- Tabs instelbaar maken voor gebruikers?
- (Na beta) Versioned tabel structuur aanpassen zoals nieuwe stresstest aantoonde dat beter was.
  * Twee tabellen, normale en _revisions. Versioned tabel heeft datum kolommen zoals, nu, MAAR GEEN created_by, created_date.
  * Probleem: als wij de created_* data in de niet-versioned tabel hebben, MOETEN WE DIE ENTRY BEWAREN BIJ DELETION!!!
  + History/revision control: misschien max 5 levels terug ofzo? Instellen ergens? Of een bepaalde tijd maar? Auto clean up?
  + Revisie aanmaken ja/nee is een optie, ik hoef dan niet in de system settings te kiezen om dit aan of uit te zetten?
    * Hmm... anders: die optie kan gebruikt worden om te FORCEN dat er ALTIJD een nieuwe revisie aan gehangen wordt. Je kunt zonder die optie er voor kiezen, maar als het aan staat is het gewoon altijd zo.
- Custom viewList heeft nog geen phenotype data.
- Hash moet ook meegestuurd worden naar login.php zodat de user naar de juiste pagina terug kan worden redirect.
- Curator aanstellen voor aandoeningen? Hebben alleen rechten op phenotype entries van de ziektes waar ze curator van zijn, plus de aansluitende individuen.
  * "Normale" curatoren mogen dan varianten, screenings alleen??? Of ook individuen???
- Kunnen custom links inserted worden door dynamic popups? PubMed geeft dan een popup met veld "PMID" en veld "Author". Kan dat geparsed worden uit de omschrijving van de custom link?
- Alle formulieren moeten fieldsets gaan gebruiken!!!
    Fieldsets die dicht zijn, moeten dicht blijven na submit. Idem voor open.
    Fieldsets die een error hebben én dicht staan, moeten gemarkeerd worden. CSS class geven die alleen activeert als hij dicht staat???
- (Ivar) Create gene:
  * Het werkelijk toevoegen van een VariantOnTranscript kolom in een functie???
  * Create genes moet in één transaction! Implement rollbacks if needed (LOVD already handles some)!
- (Ivar) Create disease: enable standard columns:
  * Het werkelijk toevoegen van een kolom in een functie???
  * Moet in één transaction? If so, implement rollbacks?
  * Sets kolommen activeren per data type? Andersom kan al wel; kolom toevoegen aan sets data types.
- Pathogenicity los koppelen, zodat "proof" kan worden toegevoegd, maar ook linken aan meerdere varianten.
- (Overleg I&I nodig) Disease -> trait? (eye color, etc)
  * Could we support both?
  * Probleem is dat je dan een speciale diseaseID nodig hebt met een flag = trait, of een flag in TABLE_SHARED_COLUMNS???
- Implement timeouts for Mutalyzer and other external sources? Try to reconnect to mirror? Ajax?
  * default_socket_timeout
  * but also: mysql.connect_timeout ?
- Security modes:
  * Passwords expire
  * Enter password in every page deactivated for some time?
  * Lock users after how many failed attempts?
  * Sessions last for how long?
  * Password storage toch in bcrypt? (pas zeker weten beschikbaar met PHP 5.3)
  * Na eerste password fail een reCAPTCHA tonen?
  ...
Lifestyle columns? Smoker yes/no? Where/how to store?





LOVD 3.0
====================
    Als een patiënt DMD (ziekte) heeft, automatisch genomische varianten mappen op genen betrokken bij DMD indien op zelfde Chr? In het geval van meerdere genen, de dichtstbijzijnde?
    Mutalyzer: als zelf via SSL beschikbaar, ga dan ook naar Mutalyzer via SSL!
++++Tijdens install checken of autoextend aan staat? Anders kan InnoDB zonder ruimte komen te zitten.
        Dan meteen maar checken welke rechten de MySQL user heeft op de database.
    Both deadlocks and lock wait timeouts are normal on busy servers and it is necessary for applications to be aware that they may happen and handle them by retrying.
        You can make them less likely by doing as little work as possible between the first change to data during a transaction and the commit, so the locks are held
        for the shortest possible time and for the smallest possible number of rows. Sometimes splitting work between different transactions may be practical and helpful.
    When a transaction rollback occurs due to a deadlock or lock wait timeout, it cancels the effect of the statements within the transaction. But if the
        start-transaction statement was START TRANSACTION or BEGIN statement, rollback does not cancel that statement. Further SQL statements become part
        of the transaction until the occurrence of COMMIT, ROLLBACK, or some SQL statement that causes an implicit commit.
    WebService / Feed can be turned on or off? Explain there that turning it off can imply less traffic to their database.
        Mummi had een mooie quote die curators kan waarschuwen voor de effecten, als ze die uit zetten:
            You (and some curators) probably won't agree with me fully on the above, I'm sure. But there could still be a useful compromise to be made here: have an on/off switch for the WS/feed access methods so curators can disable these if they wish, but at the same time 'educate' them in what I argued above about data accessibility. They can then balance this against their desire to, for one reason or other, limit accessibility options to HTML only.
            NB The accessibility issue will become especially relevant in the future when we will have the various distributed search tools: curators need to be informed that if they disable the WS/feed access methods, their LSDB will not be included alongside with all the other datasources in the federation, and so they will be less visible to potential users, get less traffic, and (ultimately) fewer citations than they might otherwise receive, and overall less peer recognition at the end of the day.
    Het hele HTML/XSS probleem. Nu hebben we nog overal XSS checks, behalve in de custom link script, toch? Deny HTML input voor column data?
        Het hele probleem is dat alle output moet ge-htmlspecialchar()ed worden om normaal getoond te worden als er een < in zit. Maar echte HTML gaat dan verloren.
        Toch overal maar htmlspecialchars invoeren? Dan moet bij de custom links worden uitgekeken dat het niet twee keer gebeurt, en daarnaast moeten de custom links later worden toegepast.
++++ListView: stick header to top met code die ook voor LOVD 2 was geschreven.
    Een array opbouwen van $_PE / ACTIONS met titels waar we zijn geweest (edits, dels, creates e.d. niet opgeslagen) zodat je makkelijk terug kunt?
    Probeer iets in te bouwen, dat een upgrade te negeren is. Dat dus iemand kan zeggen; ik wil blijven werken, ik weet dat er een probleem is. Maak dan het scherm duidelijk anders. Continue bericht bovenaan o.i.d.?
        $_SESSION VAR, uitgelezen door inc-top.php.
    Data license? Mummi schreef er over (Science Commons) 8 november 2009
        == Creative Commons, right? License chooser inbouwen per gen. Maar wat doen met de genomic variants?
    Implement tokens for forms that do not ask passwords? Tokens valid for 5 minutes only? Not to prevent abuse of computers left logged in, because the token will be regenerated, but against CSRF.
    Create disease: probeer te standaardiseren door data op te halen van OMIM of iets anders, zoals create gene ook basis data ophaalt.
    Mouseover (hover) over kolom namen op viewList() ? Waar stellen we dat in? Alleen met custom columns of ook met andere views? Idem in viewEntry?
    Om het renderen van de pagina niet te laten wachten op het downloaden van JS includes, kan deze code gebruikt worden. Werkt (nu nog) alleen op nieuwere browsers; oudere wachten alsnog (dus wel backwards compatible).
        <script>
            var node = document.createElement('script');
            node.type = 'text/javascript';
            node.async = true;
            node.src = 'example.js';
            // Now insert the node into the DOM, perhaps using insertBefore()
        </script>
    Kan de inc-upgrade intelligenter gemaakt worden zodat na een ALTER TABLE ADD COLUMN de foutmelding "Duplicate column name XXX" netjes wordt afgevangen?
    Fouten tijdens upgraden loggen, zodat na te zoeken is waar 't fout ging?
    Ondersteuning DOI i.p.v. PubMed? NMDB2 heeft al een DOI custom link.
    Genomische positie velden hernoemen naar hg19_* ?
    Na aanmaken gen, doorsturen naar welke kolommen toevoegen/verwijderen/sorteren
        Idem na disease
    Bij aanmaken disease, controleren of je die disease mogelijk al hebt? Behalve op OMIM ID natuurlijk?
    $_CONF['send_admin_submissions'] splitsen?
    Als we ooit 'ns invoeren dat je door het gen/transcript kunt scrollen grafisch, kunnen we de optie gebruiken om op de achtergrond het gen in miniatuur ook mee te scollen, maar dan langzamer.
        Een database gezien waar je door het gen kan scrollen, maar door de enorme intronen is dat bijna niet netjes te doen, je ziet niet waar je scolt.
        Met een miniatuurgen op de achtergrond die langzaam meescolt (met pixelbreede lijn om aan te geven waar je zit), kun je dat probleem oplossen.
            Een voorbeeld van deze techniek: http://www.iki.lt/lt.php (de balonnen op de achtergrond)

Overdenkingen / Kleinere dingen om te doen:
===========================================
Screenings zijn gekoppeld aan VARIANTS. Maar als 1 variant op twee transcripten effect heeft, is wellicht maar 1 van die effecten gemeten!
    Via screenings2genes is wellicht te achterhalen wel gen het betrof, maar niet welk transcript!!!
During installation LOVD does not worry about an empty database URL. However, when editing the settings it does mention that this URL is empty. Make sure the install has this behaviour as well.
Voorstel schrijven voor nieuwe functies voor de Mutalyzer webservice, standaardisatie van de namen.
Tabs instelbaar: system settings bepaalt welke tabs worden getoond; genes, diseases, transcripts, users, individuals, etc.
    Misschien niet de system settings maar individueel? Extra tabje toevoegen die + heet, die de lijst mogelijke tabs geeft met een checkbox er voor? Gebruiker vinkt aan en uit, klikt Save en pagina herlaad?
        Beter nog: inc-top herlaad? Ajax daarvoor gebruiken?
Een column ID moet altijd met een hoofdletter gemaakt worden, dus daar moet een controle op!
Columns edit, scheiding display settings / default settings:
    Denk nog ff na of verschillende niveau's misschien verschillende dingen moeten kunnen editen, zo niet er gewoon 1 script van maken.
    Variants & phenotypes zijn dan dus speciaal. "Edit gene-specific display settings" / "Edit disease-specific display settings" of iets dergelijks.
ik moet nog eens kijken naar welke formulieren een password nodig hebben

Waar we echt mee bezig zijn:
============================
checkFields() roept getForm() aan om te bepalen hoe de velden heten. Dus als er een error is, wordt getForm() twee keer aangeroepen.
    Voor forms met veel queries is dat een beetje vervelend. Kan getForm() niet een static variabele in gebruik nemen,
    die ziet dat het formulier al eerder gemaakt is (door de checkFields() call) en die dan direct returnen?
Col add: Er moet nog gekeken worden naar het bevestigingsbericht. Ook moeten diseases goed omschreven worden in messages; bij voorkeur met hun symbol.
Create genes moet het formulier gaan indelen in secties die geopend en gesloten kunnen worden.
Overnemen van LOVD2: view users zien in welke genen ze gesubmit hebben?
Store list_size per data type in a $_COOKIE, just like hidden columns and stuff
USER FORCE LOGOUT
USERS: stel tijdzone in?
    Maar dan moet je eerst even goed inlezen over die tijdzones, over de nieuwe functies en hoe dat goed te gebruiken...
Create gene: herstel percentages van voorgang, zodat het logischer verloopt.
Edit gene: created date kunnen veranderen???? Beetje vreemd, maar sowieso slikt hij de H:i:s niet die er achter staat.



// Lijst van questions about the future:
Tabs, volgorde goed?
    Submitters tab nu Users, ook zodat je db admin en managers kan zien?
        Voor de normale gebruikers moeten we bepaalde kolommen weghalen. En andere toevoegen? Adres staat niet genoemd. Zien de normale mensen de details ook (= doorklikken), of moeten we een nieuwe view maken?
Submenu's weg, knopjes met uitschuif met opties?
Gebruik kleuren in ViewLists om te scheiden? Laat zien nu geen verschil zien tussen var + ind; maar straks nog meer categoriën!
    Hide set columns, unhide all columns = algemeen
    Vinkjes voor iedere entry om snel te curaten/deleten/booten/etc oid?
Suggesties:
    Includen van de Setup in de Configuration
    submitters should be able to edit info to whichever individual, but edit only their own data,
    right click on variant -> maybe left click on a small button or mouseover explaining to right-click?,
    show pathogenicity in color values for the whole line?
        The uniprot format by the way has the advantage to use lines for the data, so adding more lines for a individual's phenotype data is just fine, but the file gets so long...



Wat moet ik onthouden tijdens het coden?
=========================================
* $_SERVER['PHP_SELF'] werkt niet meer! Want daar kan vanalles in staan. SCRIPT_NAME niet gebruiken voor doorsturen, omdat we geen .php in de URL willen.
    Af en toe ff zoeken, om te kijken of het stiekem toch gebruikt wordt.
* Unique variant overview toont alleen DNA veld???
* SELECT COUNT(*) FROM t = slower on InnoDB (index scan needed). SHOW TABLE STATUS also can be used if an *approximate* row count is sufficient.
* TRUNCATE TABLE == DELETE FROM @ InnoDB. As of MySQL 4.1.13, truncate operations cause an implicit commit. Before 4.1.13, truncate operations are not transaction-safe; an error occurs when attempting one in the course of an active transaction.
    - Some older versions may not reset the AUTO_INCREMENT value. In this case, you can use ALTER TABLE tbl_name AUTO_INCREMENT=1  after the TRUNCATE TABLE statement.
* TABLE STRUCTURE:
    // References anders regelen?
    // Alleles -> Anders noemen? Splitsen?
    // Extra tabel met Gene -> Chromosoom, mapping NG/NC_slice -> NC (1 cijfer genoeg? of strand info?), exon structuur? Data wat nu in die txt table zit?
    // Allows for orphaned screening. BUT now also, one screening for multiple individuals. (??? still true ???)
* Add index op DNA!!! (if we know how to insert the DNA information into the db)
* User levels:
    Submitter
    Colaborator (kan SOMMIGE extra velden zien van publieke entries) -> extra niveau kolom publiek ja/nee, maar collaborators wel/nee (public, collaborators, private)?
    Owner
    Curator
    Manager
    Database administrator
* Je hoeft links helemaal niet zo lang te maken, vanwege de BASE in de header.



Not sure yet how to...
======================
- Custom Column database system online
- GPL 2 only? Of toch 3 houden? Of 3 only maken? ff checken...
- API HTTP status codes: http://gif.phpnet.org/frederic/programs/http_status_codes/
- Delete users: Delete optie gewoon weglaten, tenzij er geen children zijn?
- Consequence (RNA / AA changes) apart van DNA houden?
- Aanmaken disease - voorstellen cols dmv OMIM ID en ontology lookup?
- Bij het editen insluiten de modified_date van de entry. Als die, bij het editen van de data ineens anders is, moet je een foutmelding geven. Twee mensen hebben tegelijkertijd er aan gewerkt!
    Wellicht direct in de update query?
- Genen als HOXA@ en UGT1A zijn officieel een erkend gensymbool maar zijn families van genen; ze hebben een NG per groep genen, maar een NM per gen, en de Mutalyzer SOAP call flipt omdat die geen NC slice kan maken.


HANDLEIDING
===========
- Moet zo geschreven worden, dat er van dezelfde source een HTML en PDF gegenereerd kan worden.
- Per pagina moet duidelijk zijn, welk level nodig is om deze feature te gebruiken, en vanaf welke versie dit is ingevoerd.
- Vanuit LOVD moet de Help of Documentation tab direct verwijzen naar de pagina in de handleiding over het scherm waar de gebruiker op dat moment in zit.


Update process
==============
* ALLES IN UTF-8!!!
* Laat export in 2.0 maken, die data al omzet. De vragen voor het omzetten van de data, gebeuren DAAR.
* De export wordt gedownload, en moet daarna in 3.0 geladen worden. Of SQL file met MD5 check?
* Klaar, de 2.0 kan verwijderd worden indien gewenst.


Needed before release
=====================
    Als mensen submitten (wat voor data dan ook), controleren of data al eerder in database gevonden is? Of data bijna gelijk hier aan?
        Aangevraagd door Raymond, en hij acht dit zeer belangrijk.
    Later een OFFLINE_MODE inbouwen, die geen contact op neemt met remote servers, maar toestaat dat alles handmatig wordt gedaan.
        Dit moet een (tijdelijke?) instelling zijn, en overal lekker irritant aangegeven worden, zodat mensen het niet gebruiken om van de standaarden af te kunnen wijken.
    Hoe kunnen we multiple select velden duidelijker maken?
        Standaard mouseover met uitleg? Standaard notes er bij?
        Opsplitsen in twee boxen waar entries heen gesleept kunnen worden?
        Omzetten naar lijst checkboxes?
    Astrid Out en Carli Tops zouden graag de mogelijkheid hebben om een overzicht te krijgen van individuals naar mutaties, i.e.
        in de database van GenX kunnen zoeken op (aanwezigheid van?) varianten in GenY.
    Default list_size moet onthouden worden in COOKIE, net zoals de hidden cols.
++++Check alle queries 'ns.
    Cols - check huidige omschrijvingen in DMD of shared LOVD install, wellicht anders nu.
        DB-ID column heet ID op het formulier.
+++ Kolommen verkeerd gemapped.
        Johan: country/ethnicity kolommen van individual naar variant (Ind2Var!).
            Individual/Origin/Geographic, Individual/Origin/Ethnic, Individual/Origin/Population
                Ertussen dan maar? Wacht ff hoor... de speciale variant overview werkt alleen op de Individual cols...
            (...) veel naar gevraagd wordt (Variant_Amino_acid_SIFT, Variant_Amino_acid_PolyPhen, Variant_Amino_acid_AlignGVGD, DNA-reported).
            Er is verwarring en overlap over de onderwerpen Allele, Individual/Occurence, Individual/Mutation/Origin, Individual/Mutation/Origin_De_Novo.
    Techniek nodig om de database dicht te zetten, tijdens de update.
        Johan wil een installatie dicht kunnen gooien (behalve hem en de DBA ofzo?), om tijdelijk te voorkomen dat submitters iets editen.
    Column type wizard:
        Select: waarde i.p.v. yes (-- select --) or no.
    Gebruikers de external sources laten beheren?
    Kunnen we bij de upgrade zien of een upgrade al gedaan is? Dat een foutmelding "duplicate key" ofzo ondervangen wordt, zodat ie doorgaat?



OTHER:
    If family ID column present, report in unique variant overview how many entries in total AND how many families in total.
    Internationalization?
- Boven log entries een paar blokken plaatsen; per log eentje. JS er op, die search_name invult, en formulier submit.
  * Eventueel met highlight.

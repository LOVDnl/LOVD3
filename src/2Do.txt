Prioritize:
===========
On all multiple selection lists, voeg meer uitleg toe aan het veld hoe dingen te selecteren/deselecteren, onder ?.
No cols for gene? "No shared_columns found!"
- Custom columns need to be able to be edited per gene!
  + URL: /gene/GENE/columns/VariantOnTranscript/DNA (viewentry)
  + URL: /gene/GENE/columns/VariantOnTranscript/DNA?edit
- Bug: VOT/Protein edit: Disallowed tag found in form field "description_legend_full". XSS attack?
- Mapping script moet geen p.(=) opslaan, als Mutalyzer een WSPLICE foutmelding geeft.
- IE pakt geen window.location.hrefs zonder full URL (hij negeert BASE tag). Hier omheen werken.
  + Reported by Christopher Watson.
- Johan wil geen homozygote varianten opslaan als 1 entry, moeten er twee worden. De tweede entry hoeft niet per se verborgen te worden als 't veel werk is.
  + Overal waar er counts worden gedaan van de varianten, moeten we daarna checken of dat (nog) goed gaat.
- (@Ivo) Row Link probleem:
  + Every object needs a variable, indicating where the rowlink needs to be implemented as an HTML anchor; id_ == default.
    * Currently, Object::prepareData() puts the link in every id_ column it can find.
  + We NEED to have a better way to get the row_id & row_link to work. It has become quite a mess and often difficult to work with or debug!!!
  + Objects::viewList() heeft sinds kort code voor het invullen van $zData['row_id'] en aanverwanten. De prepareData() functies kunnen daarom ingekort worden.
- (@Ivo) Link van /view/GENE moet naar individu indien aanwezig, anders variant.
- (@Ivar) Combined viewList toevoegen onder andere viewEntries, overal waar er viewLists zijn van varianten even kijken welke daar het beste kan staan.
- (BELANGRIJK) Van alles moet bepaald worden wat de minimale level is die benodigd is.
  + (@Ivar) De hele submissie code moet worden gecontroleerd, of de rechten wel goed zijn. Een submitter moet OWNER zijn van de data, om daar iets aan toe te voegen.
    * Curatoren krijgen rechten via ownership of via de genen (varianten van individu). Hier hetzelfde: als isAuthorized rechten geeft op de target/parent, dan mag je toevoegen.
  + IVAR: Status kolom moet ook gehide worden, als men niet is ingelogd. Regelen in objects.php of object_*.php.
    * objects_custom moet alle kolommen laden; functies die de data opbouwen voor viewForm, viewEntry, getForm, checkFields etc moeten dan de juiste flags controleren.
    * VERGEET OOK PUBLIC_VIEW/PUBLIC_ADD CONTROLE NIET (van de custom columns). OOK IN CUSTOM VIEWLIST.
  + Testen wat public / curator wel en niet mag.
  + Ook als knopjes niet zichtbaar zijn, of de pagina zelf 'm ook blokkeert.
- Unit tests via Selenium (of alternatief)?
- VariantOnGenome/Times_reported???
- Handmatige variant mapper: ook p. description ophalen bij Mutalyzer?
- Unieke variant met niet-unieke DBID: edit geeft foutmelding, maar de auto suggest is dezelfde ID. Wat moet er anders?
- Referer from login moet pagina zijn met alleen een action? Om te voorkomen dat er geredirect wordt naar een del action zonder dat dat de bedoeling is?
- Mapping script moet nog genen aanmaken na VCF import, als de HGNC geen transcripten weet.
- Als een individu wordt verwijderd, worden de varianten niet verwijderd - deze blijven dus hangen in het systeem.
  + Als je een individu verwijderd, moet het een optie worden om de X varianten ook te verwijderen, of de varianten los te koppelen en vrij te laten in het systeem.
  + Daarnaast: als je een screening verwijdert, blijven de varianten die nergens anders aan verbonden zijn, los hangen in het systeem.
    * Als je een screening verwijderd, moet er een waarschuwing bij komen, dat er X varianten worden verwijderd uit het systeem, omdat die alleen aan deze screening vast zitten.

- Beta-05:
  - DATA DOWNLOAD.
    + Improve info in de header over de filters die gebruikt zijn.
    + DATA IMPORT
      * Choose character set!
        - Macintosh input files werken niet goed; heeft http://nl2.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings
          nodig... dat werkt vanaf 4.3.0... Alleen laden met config_import.txt?
          Testfile heb ik in mijn email, van David Bonthron (Wed, 18 Jun 2008 12:28:46 +0100).
      * Import duidelijk anders doen. Overschrijven toestaan indien aangevinkt; scheelt veel tijd en een tijdelijk lege database.
        - Dat moet dan ongelofelijk goed gecontroleerd worden!!!
        - Store in session / DB in een col met serialized data?
  - Submit a variant that has already been reported (zoals in LOVD 2.0 met auto complete, of viewList?)
  - Een submitter moet voor 't publiek zichtbaar zijn (in Reference veld, of created_by of owned_by dan toch toevoegen?)
  - Een ingelogde gebruiker hoort een grote melding te zien dat er stored submissions zijn, en hij hoort deze te kunnen bekijken.
  - (@Ivar) Als Mutalyzer van een variant de posities niet kan isoleren, gebruik dan de fallback LOVD 2.0 code.
  - (@Ivar) Fix transcript position numbers (change code gene create, verzin manier om alle waardes weg te gooien en opnieuw te berekenen)
    + Hierna kan de transcript ViewList voor nieuwe VOT op bestaande VOG specifieker worden geselecteerd.
  - Johan wil dat we bij de redirect("Successfully created *****") een knop zetten. Er moet dan een tekst staan met "You are being redirected, if not you can click here". Schijnbaar werkt de redirect soms niet.
    + Redirect: zouden we dan misschien een functie moeten maken? Code voor een knopje met redirect (JS lijkt me het handigst?) in een lovd_showInfoTable() is dan best wel weer lang.
  - Ook moeten we ergens een tekst zetten waarop staat dat als je als submitter een hoop varianten wil submitten dat je dan ook contact kunt opnemen met de curator, zodat hij/zij deze via een upload kan importeren.
  - HGNC niet te bereiken? Nette foutmelding of mirror gebruiken?
  - Gene create: diseases van OMIM mirror van LOVD.nl ophalen?
  - (Ivar) Diseases: zit er een check op, dat er maar 1 OMIM ID mag worden aangemaakt? Code level?
  - Begin met manual (eerst alleen nog PDF).
  - Variant/Times_reported (or similar)
    + Iedere variant die gevonden wordt in de panel moet dan apart geteld worden, door middel van het "VariantOnGenome/Times_reported" veld (eventueel
      "VariantOnGenome/Chromosomes_reported" of "VariantOnGenome/Found_on_chromosomes" of ...). Hier moet het aantal chromosomen worden ingevuld, waar de
      variant is gevonden. De frequentie is dan uit te rekenen volgens: "VariantOnGenome/Times_reported" ÷ (Individuals "panel_size" * 2)
    + Om aan te geven dat een variant niet gevonden is in een controle groep, kan men de "Variant/Times_reported" op 0 zetten, maar dan alleen als de
      Individuals "panel_size" groter dan 1 is (dus dat mag niet in een individu, alleen een panel).
    + LOVD kan nu altijd simpel het aantal gevonden varianten tellen aan de hand van de Variant/Times_reported kolom.
  - "Does not accept external submissions" setting? Dat moet dan ook worden doorgegeven, zodat de LOVD/LSDB lijst dat kan aangeven.
    + Apart veld, niet in data.
  - Email forwards: staat de Reply-To altijd goed? Regelen in lovd_sendMail()?
  - All trim() calls in checkFields() calls can be removed, since data is automatically trimmed in Object::checkFields() anyway.
  - Gene notes for variant listings implementeren?
  - Gene headers & footers implementeren?
  - Should we maybe set default_socket_timeout somewhere?

- Hebben we OpenSSL ergens voor nodig?
  + http mutalyzer contact als zelf in https???
- Orphanet links toevoegen: meteen ID kolommen omzetten in 'n grote bitwise kolom?
- Johan: 2011-08-18: een ontwikkeling die ik momenteel zie is dat submitters bereid zijn alle varianten verbonden aan één patient te submitten,
  maar wel zelf willen kunnen zien welke varianten allemaal bij die patient horen maar niet dat anderen dat kunnen zien (database bezoekers).
  De reden daarachter is privacy.
  + Hoe is dit simpel te realiseren ?. Is het mogelijk een button toe te voegen waarmee je aangeeft of in LOVD displays het wel/niet is
    toegestaan dat bezoekers alle varianten gekoppeld aan een patient krijgen te zien ?. De submitter (of curator) krijgt na inloggen dan
    wel alle varianten gekoppeld aan een patient te zien.
    * De ViewList zou dan naar de VOG/VOT ViewEntry moeten wijzen, die zou dan geen link naar individual mogen hebben.
    * De ViewList zou wel de individu informatie mogen tonen, toch?
    * De Individual ID zou wel op een bepaalde manier verborgen moeten worden.
      - De ViewEntry van de Individu zou dan ook niet-public moeten zijn.
- Iets als check_update, maar dan check_news.php. Wordt gerund iedere keer als men inlogt. Maakt gebruik van Atom feed of tab delimited en presenteert nieuws (jQuery!)
  + Ook support mededelingen: voor versies alpha-01 t/m alpha-10 het bericht dat alpha niet meer ondersteund wordt, dus je moet upgraden. Of voor alle installs op onze server (signature check): downtime dan en dan. Op versie of op signature??? Zoiets.
  + Ook instellen per user level (submitter, curator, manager, db admin).
  + Na het inloggen, indien er een update is, een tooltip weergeven rechtsonder dat er een update is! Niet de hele tijd dus, alleen nadat je net bent ingelogd.
    * Je kunt $_STAT gewoon analyseren, want het icoon is al geladen tijdens het inloggen dus hoort al te weten dat er een update is!
    * Popup heeft andere kleur aan de hand van update belangrijkheid...
    * Kan popup zo'n hoekje hebben die naar het logo wijst?
- Vanaf beta moeten bij bugfixes de datum en versie gezet worden..
- INCORPORATE PDO EVERYWHERE.
  + Check for lovd_queryDB calls.
  + When done with this, make sure all the left mysql_query() calls are taken out, too.
- User curator maken voor >1 gen in 1 keer: nieuw form!
  + Popup van zijn viewEntry; alleen genen tonen waar hij GEEN curator voor is, geef twee vinkjes: wel/niet edit, wel/niet zichtbaar.
  + Remove als curator: apart van add, geen vinkjes.
- (~BELANGRIJK) Misschien beter een inc-js-lib-init.php o.i.d. te maken, omdat we nu al openWindow en toggleVisibility hebben, en dat zijn al twee JS calls. Vertraagt LOVD.
- <OPTGROUP label="groep"><OPTION value="asdf">asdf</OPTION></OPTGROUP> voor custom link active for columns selection?
- Add Individual/Parents/Father and /Mother, but probably not as custom columns? We don't want to deal with these cols in the data entry forms I think.
- Custom View:
  * The full data overview moet nog de varianten tonen, die óók in de individu gevonden zijn.
- Probleem LOVD2 c.0, c.= en c.? notaties. Speciale variant IDs of andere flag? Wel/niet tonen = instelling?
- (@Ivar) Als curatoren iets veranderen, moet er ook gemailed worden! Ook aan de collega's! Ook aan de data owner! Iedereen moet gewoon altijd overal over gemailed worden.
- Newline in naam submitter bij register -> Header injection??? Waar hiertegen beschermen? In objects.php, dat in normale text velden geen newlines mogen zitten?
  * Maar ook met dubbele quotes in de naam gaat mis; speciaal dit veld opschonen of meer? Hoe?
- Kolom activeren per gen: moet via POST omdat via GET soms te lang is.
- Delete user verder ontmoedigen?
- VariantOnGenome/dbSNP column with rsID
  * Beter heel nummer mét rs erbij.
- LOVD 3.0 heeft libxml nodig voor REST2SOAP, én we zitten nu op PHP >= 5.1.0, hebben we dan wellicht niet sowieso extra interessante mogelijkheden?
- Ensemble gene ID opslaan en leiden naar: http://www.ensembl.org/Homo_sapiens/Gene/Summary?g=ENSG00000073734
- Het is niet duidelijk wat object_id nu precies is (gene symbol of disease id, bedoeld om te bepalen welke cc actief zijn)
  - Ook id is niet echt duidelijk (dit is eigenlijk de foreign key van de entry (variantid, individualid), bedoeld om te bepalen welke cc actief zijn)
- CUSTOM VIEWLISTS:
  * URLS:
    - /view     -> MAPPING TO /view/variants+screenings+individuals+phenotypes
    - All the traffic to variants and individuals in LOVD 2.0 enters through variants.php, lucky me. So this file in 3.0 will both serve the "new" clean URLs, but if it detects the old LOVD 2.0 formatted URLs, it will forward to the standard URL.
- (@Ivo) genes?authorize : Gebruikers mogen geen gelijke users rechten ontnemen. Bouw die check in op query niveau.
- status.php:
  * Zorg er voor dat de info die uit status.php gehaald kan worden m.b.t. de genen, ook in de genes viewList terecht komen.
  * Status.php kan dan andere gegevens gaan geven, niet meer per gen. Heb je suggesties?
- Er mogen geen 2.0 opmerkingen meer in LOVD 3.0 staan.
- When disease is created, forward user to select columns for this disease.
- Veranderingen zoals voorgesteld 2011-06-28?
  * Allele, genetic_origin, Phenotype/Inheritance
    - Current plans:
        Variant/allele -> Variant/Phase?
- In individual viewList: lijst genen meest gemuteerd?
- Als account gelocked wordt, moet er naar de gebruiker die gelocked is, gemailed worden.
- Raar: /genes/DMD?authorize -> click alle users aan -> resort viewList.
- Use uniqid() ipv lovd functie?
- Deinstalleren moet gewoon altijd werken. Als de foutmelding "foreign key constraint fails" opduikt bij het removen, moet LOVD gewoon opnieuw proberen of misschien in een andere (random??) volgorde of misschien de tabel die de fout triggered achteraan zetten en opnieuw proberen.
- Links to other resources op gene viewEntry() moet opgeruimd worden; niet-actieve velden weg.
- Geheugengebruik hoog vanwege session: Ook fix nodig voor viewList data? Blijft ook hangen.
- Bij installatie controleren of er een mailserver is? Poort 25 check?
- Bij aanmaken gen en geen LRG, wel check of LRG bestaat voor pending? (LRG webservice)
  * Dan op een bepaalde manier de curator van op de hoogte stellen?
  * Bij gebruik LRG webservice: Pontus: "Should a key be leaked or stolen in a way so that it is misused, we may need to reserve the right to ban that key. In that case, you would perhaps want to implement some way of redistributing new keys to the LOVD installations..."
    Me: "I see - in that case I can't hard-code it in, but need to store it in the database somewhere. However, anyone wanting to abuse the system could easily find out the new key. So if somebody really does want to do harm, it's quite impossible to lock them out *without* locking LOVDs out, unless you would introduce per-LOVD keys and match each key with a certain IP address..."
- (@Ivo) De Oostenrijkse DB sluit:
  http://grenada.lumc.nl/LSDB_list/lsdb.php?action=view_all&symbol_start=DHCR7
  (zie email van 9 jan)
- Menu's onder viewEntry's mooier maken: array met voorwaarde, link, logo en tekst. Functie doet de rest.
- Menu's bij viewLists.
- Columns hiden door Javascript -> instant hide. Kolommen een class mee geven daarvoor.
- De inc-init moet toch een autocommit hebben? waarom staat dat niet aan?
- Mutalyzer webservice "Ping" module ergens in REST2SOAP ofzo integreren, zodat meteen kan worden gechecked of mutalyzer gewoon up is.
- API.
- ORCID integratie.
- lovd_setUpdatedDate() implementeren.
- Since Objects::checkFields() is running getForm(), can't that code take care of invalid values in selection lists? Now that code is all over the place; object_custom for custom columns and lots of object_* files for each data type.
- Floating header? Anders: eerst de hele tabel inladen, daarna nieuwe table maken, de TR moven naar de andere tabel met behoud van breedte, en laten floaten.
  + Eventueel code gebruiken gesuggereerd door Ivar (november 2011)
  - Implement lovd_getColumnMaxValue() in inc-lib-init.php.
- SeattleSeq import: in welke kolom worden de dbSNP links geladen? Is nu nummerieke select, moet text values worden.
- Mapper geeft query error als VOT DNA veld niet actief is: ondervangen?
- CURRENT_PATH is mooier in de code dan $_PE[0] . '/' . $nID, maar CURRENT_PATH mist de str_pad die $nID wel heeft. Is hier een mooie oplossing voor?
  + Kan CURRENT_PATH afhankelijk worden gemaakt van een bepaalde predefined set, dat <object>/<numeriek> automatisch een str_pad/sprintf ontvangt, afhankelijk van <object>?
From LOVD 2.0:
  + The error message that is shown if a gene symbol is passed to LOVD that does not exist in the database, now suggests an URL where the gene database might be found.





MOET OVERLEGD WORDEN:
=====================
- Zwakkere koppeling tussen individu en disease?
  * Link IND2DIS: "proven"/"presumed" flag?
- (BELANGRIJK) Allele => Gametic Phase? Check alle waardes in de groep.
- Hoe kunnen we toch toestaan, dat users voor een grote groep genen tegelijk curator kunnen worden gemaakt?
  * Probleem vergeleken met LOVD 2.0 is dat je allow_edit en shown ook moet kunnen bewerken... Of kunnen we daar omheen werken?




Doen voordat LOVD 3.0 online gebruikt kan worden:
=================================================
- (Ivo) Stress test??? Als het datamodel écht moet worden aangepast, kan dat wellicht niet goed via inc-upgrade.php.
  * Concurrent users testen! Normale overviews, hoeveel users kan het aan? Is dit wel LOVD specifiek of misschien teveel op de hardware?
  * Gebruik om dit te testen Apache benchmarks? Wordt gebruikt om Apache aan te roepen, schijnt heel handig te zijn.
  * Waarom is de interface traag maar een simpele query niet? Top? Query incl.  joins in MySQL runnen?





Data transfer LOVD 2.0 -> LOVD 3.0:
===================================
- Submitters and users should be imported separately. Their IDs will change, and multiple LOVD 2.0 installs can come together in one LOVD 3.0.
- Genes and transcripts need to be imported, or regenarated, in LOVD 3.0 separately.
- Idem diseases?
- The rest of the data then should go in a LOVD 3.0 format.
- To make life easier for the users:
  + Can the new LOVD 3.0 install not ask for the LOVD 2.0 install location, download gene, disease and transcript info, then possibly ask for its admin account, and download the rest of the data?
  + Alternatively, from LOVD 2.0 you could have the user generate an ID, LOVD 3.0 then somehow receives this ID, and logs into the LOVD 2.0 installation to retrieve data (or LOVD 2.0 sends it).
  + For all of this, the LOVD 2.0 does need to be accessible for the LOVD 3.0 install.





Ook belangrijk, maar iets minder:
- Tabs instelbaar maken voor gebruikers?
- (Na beta) Versioned tabel structuur aanpassen zoals nieuwe stresstest aantoonde dat beter was.
  * Twee tabellen, normale en _revisions. Versioned tabel heeft datum kolommen zoals, nu, MAAR GEEN created_by, created_date.
  * Probleem: als wij de created_* data in de niet-versioned tabel hebben, MOETEN WE DIE ENTRY BEWAREN BIJ DELETION!!!
  + History/revision control: misschien max 5 levels terug ofzo? Instellen ergens? Of een bepaalde tijd maar? Auto clean up?
  + Revisie aanmaken ja/nee is een optie, ik hoef dan niet in de system settings te kiezen om dit aan of uit te zetten?
    * Hmm... anders: die optie kan gebruikt worden om te FORCEN dat er ALTIJD een nieuwe revisie aan gehangen wordt. Je kunt zonder die optie er voor kiezen, maar als het aan staat is het gewoon altijd zo.
- Custom viewList heeft nog geen phenotype data.
- Hash moet ook meegestuurd worden naar login.php zodat de user naar de juiste pagina terug kan worden redirect.
- Curator aanstellen voor aandoeningen? Hebben alleen rechten op phenotype entries van de ziektes waar ze curator van zijn, plus de aansluitende individuen.
  * "Normale" curatoren mogen dan varianten, screenings alleen??? Of ook individuen???
- Kunnen custom links inserted worden door dynamic popups? PubMed geeft dan een popup met veld "PMID" en veld "Author". Kan dat geparsed worden uit de omschrijving van de custom link?
- Alle formulieren moeten fieldsets gaan gebruiken!!!
    Fieldsets die dicht zijn, moeten dicht blijven na submit. Idem voor open.
    Fieldsets die een error hebben én dicht staan, moeten gemarkeerd worden. CSS class geven die alleen activeert als hij dicht staat???
- (Ivar) Create gene:
  * Het werkelijk toevoegen van een VariantOnTranscript kolom in een functie???
  * Create genes moet in één transaction! Implement rollbacks if needed (LOVD already handles some)!
- (Ivar) Create disease: enable standard columns:
  * Het werkelijk toevoegen van een kolom in een functie???
  * Moet in één transaction? If so, implement rollbacks?
  * Sets kolommen activeren per data type? Andersom kan al wel; kolom toevoegen aan sets data types.
- Pathogenicity los koppelen, zodat "proof" kan worden toegevoegd, maar ook linken aan meerdere varianten.
- (Overleg I&I nodig) Disease -> trait? (eye color, etc)
  * Could we support both?
  * Probleem is dat je dan een speciale diseaseID nodig hebt met een flag = trait, of een flag in TABLE_SHARED_COLUMNS???
- Implement timeouts for Mutalyzer and other external sources? Try to reconnect to mirror? Ajax?
  * default_socket_timeout
  * but also: mysql.connect_timeout ?
- Security modes:
  * Passwords expire
  * Enter password in every page deactivated for some time?
  * Lock users after how many failed attempts?
  * Sessions last for how long?
  * Password storage toch in bcrypt? (pas zeker weten beschikbaar met PHP 5.3)
  * Na eerste password fail een reCAPTCHA tonen?
  ...
Lifestyle columns? Smoker yes/no? Where/how to store?





LOVD 3.0
====================
    Als Find & Replace wordt ingebouwd, moet de opzet anders worden:
        Een viewList, met daarboven heel compact het formulier voor de Find & Replace
        De voorgestelde verandering is direct zichtbaar gemarkeerd in de viewList (wordt gedaan in PHP/Prepare data), die ze kunnen sorteren, navigeren, etc.
            Wellicht niet extra doorzoeken, want dan krijg je verschil DB inhoud/wat je op het scherm ziet.
    Als een patiënt DMD (ziekte) heeft, automatisch genomische varianten mappen op genen betrokken bij DMD indien op zelfde Chr? In het geval van meerdere genen, de dichtstbijzijnde?
    Mutalyzer: als zelf via SSL beschikbaar, ga dan ook naar Mutalyzer via SSL!
++++Tijdens install checken of autoextend aan staat? Anders kan InnoDB zonder ruimte komen te zitten.
        Dan meteen maar checken welke rechten de MySQL user heeft op de database.
    Both deadlocks and lock wait timeouts are normal on busy servers and it is necessary for applications to be aware that they may happen and handle them by retrying.
        You can make them less likely by doing as little work as possible between the first change to data during a transaction and the commit, so the locks are held
        for the shortest possible time and for the smallest possible number of rows. Sometimes splitting work between different transactions may be practical and helpful.
    When a transaction rollback occurs due to a deadlock or lock wait timeout, it cancels the effect of the statements within the transaction. But if the
        start-transaction statement was START TRANSACTION or BEGIN statement, rollback does not cancel that statement. Further SQL statements become part
        of the transaction until the occurrence of COMMIT, ROLLBACK, or some SQL statement that causes an implicit commit.
    WebService / Feed can be turned on or off? Explain there that turning it off can imply less traffic to their database.
        Mummi had een mooie quote die curators kan waarschuwen voor de effecten, als ze die uit zetten:
            You (and some curators) probably won't agree with me fully on the above, I'm sure. But there could still be a useful compromise to be made here: have an on/off switch for the WS/feed access methods so curators can disable these if they wish, but at the same time 'educate' them in what I argued above about data accessibility. They can then balance this against their desire to, for one reason or other, limit accessibility options to HTML only.
            NB The accessibility issue will become especially relevant in the future when we will have the various distributed search tools: curators need to be informed that if they disable the WS/feed access methods, their LSDB will not be included alongside with all the other datasources in the federation, and so they will be less visible to potential users, get less traffic, and (ultimately) fewer citations than they might otherwise receive, and overall less peer recognition at the end of the day.
    Het hele HTML/XSS probleem. Nu hebben we nog overal XSS checks, behalve in de custom link script, toch? Deny HTML input voor column data?
        Het hele probleem is dat alle output moet ge-htmlspecialchar()ed worden om normaal getoond te worden als er een < in zit. Maar echte HTML gaat dan verloren.
        Toch overal maar htmlspecialchars invoeren? Dan moet bij de custom links worden uitgekeken dat het niet twee keer gebeurt, en daarnaast moeten de custom links later worden toegepast.
++++ListView: stick header to top met code die ook voor LOVD 2 was geschreven.
    Een array opbouwen van $_PATH_ELEMENTS / ACTIONS met titels waar we zijn geweest (edits, dels, creates e.d. niet opgeslagen) zodat je makkelijk terug kunt?
    Probeer iets in te bouwen, dat een upgrade te negeren is. Dat dus iemand kan zeggen; ik wil blijven werken, ik weet dat er een probleem is. Maak dan het scherm duidelijk anders. Continue bericht bovenaan o.i.d.?
        $_SESSION VAR, uitgelezen door inc-top.php.
    Data license? Mummi schreef er over (Science Commons) 8 november 2009
        == Creative Commons, right? License chooser inbouwen per gen. Maar wat doen met de genomic variants?
    Implement tokens for forms that do not ask passwords? Tokens valid for 5 minutes only? Not to prevent abuse of computers left logged in, because the token will be regenerated, but against CSRF.
    Create disease: probeer te standaardiseren door data op te halen van OMIM of iets anders, zoals create gene ook basis data ophaalt.
    Mouseover (hover) over kolom namen op viewList() ? Waar stellen we dat in? Alleen met custom columns of ook met andere views? Idem in viewEntry?
    Om het renderen van de pagina niet te laten wachten op het downloaden van JS includes, kan deze code gebruikt worden. Werkt (nu nog) alleen op nieuwere browsers; oudere wachten alsnog (dus wel backwards compatible).
        <script>
            var node = document.createElement('script');
            node.type = 'text/javascript';
            node.async = true;
            node.src = 'example.js';
            // Now insert the node into the DOM, perhaps using insertBefore()
        </script>
    Kan de inc-upgrade intelligenter gemaakt worden zodat na een ALTER TABLE ADD COLUMN de foutmelding "Duplicate column name XXX" netjes wordt afgevangen?
    Fouten tijdens upgraden loggen, zodat na te zoeken is waar 't fout ging?
    Ondersteuning DOI i.p.v. PubMed? NMDB2 heeft al een DOI custom link.
    Genomische positie velden hernoemen naar hg19_* ?
    Na aanmaken gen, doorsturen naar welke kolommen toevoegen/verwijderen/sorteren
        Idem na disease
    Bij aanmaken disease, controleren of je die disease mogelijk al hebt? Behalve op OMIM ID natuurlijk?
    $_CONF['send_admin_submissions'] splitsen?
    Als we ooit 'ns invoeren dat je door het gen/transcript kunt scrollen grafisch, kunnen we de optie gebruiken om op de achtergrond het gen in miniatuur ook mee te scollen, maar dan langzamer.
        Een database gezien waar je door het gen kan scrollen, maar door de enorme intronen is dat bijna niet netjes te doen, je ziet niet waar je scolt.
        Met een miniatuurgen op de achtergrond die langzaam meescolt (met pixelbreede lijn om aan te geven waar je zit), kun je dat probleem oplossen.
            Een voorbeeld van deze techniek: http://www.iki.lt/lt.php (de balonnen op de achtergrond)

Overdenkingen / Kleinere dingen om te doen:
===========================================
Screenings zijn gekoppeld aan VARIANTS. Maar als 1 variant op twee transcripten effect heeft, is wellicht maar 1 van die effecten gemeten!
    Via screenings2genes is wellicht te achterhalen wel gen het betrof, maar niet welk transcript!!!
During installation LOVD does not worry about an empty database URL. However, when editing the settings it does mention that this URL is empty. Make sure the install has this behaviour as well.
Voorstel schrijven voor nieuwe functies voor de Mutalyzer webservice, standaardisatie van de namen.
Tabs instelbaar: system settings bepaalt welke tabs worden getoond; genes, diseases, transcripts, users, individuals, etc.
    Misschien niet de system settings maar individueel? Extra tabje toevoegen die + heet, die de lijst mogelijke tabs geeft met een checkbox er voor? Gebruiker vinkt aan en uit, klikt Save en pagina herlaad?
        Beter nog: inc-top herlaad? Ajax daarvoor gebruiken?
Een column ID moet altijd met een hoofdletter gemaakt worden, dus daar moet een controle op!
Columns edit, scheiding display settings / default settings:
    Denk nog ff na of verschillende niveau's misschien verschillende dingen moeten kunnen editen, zo niet er gewoon 1 script van maken.
    Variants & phenotypes zijn dan dus speciaal. "Edit gene-specific display settings" / "Edit disease-specific display settings" of iets dergelijks.
ik moet nog eens kijken naar welke formulieren een password nodig hebben

Waar we echt mee bezig zijn:
============================
checkFields() roept getForm() aan om te bepalen hoe de velden heten. Dus als er een error is, wordt getForm() twee keer aangeroepen.
    Voor forms met veel queries is dat een beetje vervelend. Kan getForm() niet een static variabele in gebruik nemen,
    die ziet dat het formulier al eerder gemaakt is (door de checkFields() call) en die dan direct returnen?
Col add: Er moet nog gekeken worden naar het bevestigingsbericht. Ook moeten diseases goed omschreven worden in messages; bij voorkeur met hun symbol.
Create genes moet het formulier gaan indelen in secties die geopend en gesloten kunnen worden.
Overnemen van LOVD2: view users zien in welke genen ze gesubmit hebben?
Store list_size per data type in a $_COOKIE, just like hidden columns and stuff
USER FORCE LOGOUT
USERS: stel tijdzone in?
    Maar dan moet je eerst even goed inlezen over die tijdzones, over de nieuwe functies en hoe dat goed te gebruiken...
Create gene: herstel percentages van voorgang, zodat het logischer verloopt.
Edit gene: created date kunnen veranderen???? Beetje vreemd, maar sowieso slikt hij de H:i:s niet die er achter staat.



// Lijst van questions about the future:
Tabs, volgorde goed?
    Submitters tab nu Users, ook zodat je db admin en managers kan zien?
        Voor de normale gebruikers moeten we bepaalde kolommen weghalen. En andere toevoegen? Adres staat niet genoemd. Zien de normale mensen de details ook (= doorklikken), of moeten we een nieuwe view maken?
Submenu's weg, knopjes met uitschuif met opties?
Gebruik kleuren in ViewLists om te scheiden? Laat zien nu geen verschil zien tussen var + ind; maar straks nog meer categoriën!
    Hide set columns, unhide all columns = algemeen
    Vinkjes voor iedere entry om snel te curaten/deleten/booten/etc oid?
Suggesties:
    Includen van de Setup in de Configuration
    submitters should be able to edit info to whichever individual, but edit only their own data,
    right click on variant -> maybe left click on a small button or mouseover explaining to right-click?,
    show pathogenicity in color values for the whole line?
        The uniprot format by the way has the advantage to use lines for the data, so adding more lines for a individual's phenotype data is just fine, but the file gets so long...
    mouseover column or column header for legend info?



Wat moet ik onthouden tijdens het coden?
=========================================
* $_SERVER['PHP_SELF'] werkt niet meer! Want daar kan vanalles in staan. SCRIPT_NAME niet gebruiken voor doorsturen, omdat we geen .php in de URL willen.
    Af en toe ff zoeken, om te kijken of het stiekem toch gebruikt wordt.
* Unique variant overview toont alleen DNA veld???
* SELECT COUNT(*) FROM t = slower on InnoDB (index scan needed). SHOW TABLE STATUS also can be used if an *approximate* row count is sufficient.
* TRUNCATE TABLE == DELETE FROM @ InnoDB. As of MySQL 4.1.13, truncate operations cause an implicit commit. Before 4.1.13, truncate operations are not transaction-safe; an error occurs when attempting one in the course of an active transaction.
    - Some older versions may not reset the AUTO_INCREMENT value. In this case, you can use ALTER TABLE tbl_name AUTO_INCREMENT=1  after the TRUNCATE TABLE statement.
* TABLE STRUCTURE:
    // References anders regelen?
    // Alleles -> Anders noemen? Splitsen?
    // Extra tabel met Gene -> Chromosoom, mapping NG/NC_slice -> NC (1 cijfer genoeg? of strand info?), exon structuur? Data wat nu in die txt table zit?
    // Allows for orphaned screening. BUT now also, one screening for multiple individuals. (??? still true ???)
* Add index op DNA!!! (if we know how to insert the DNA information into the db)
* User levels:
    Submitter
    Colaborator (kan SOMMIGE extra velden zien van publieke entries) -> extra niveau kolom publiek ja/nee, maar collaborators wel/nee (public, collaborators, private)?
    Owner
    Curator
    Manager
    Database administrator
* Je hoeft links helemaal niet zo lang te maken, vanwege de BASE in de header.



Not sure yet how to...
======================
- Custom Column database system online
- GPL 2 only? Of toch 3 houden? Of 3 only maken? ff checken...
- API HTTP status codes: http://gif.phpnet.org/frederic/programs/http_status_codes/
- Delete users: Delete optie gewoon weglaten, tenzij er geen children zijn?
- Consequence (RNA / AA changes) apart van DNA houden?
- Aanmaken disease - voorstellen cols dmv OMIM ID en ontology lookup?
- Bij het editen insluiten de modified_date van de entry. Als die, bij het editen van de data ineens anders is, moet je een foutmelding geven. Twee mensen hebben tegelijkertijd er aan gewerkt!
    Wellicht direct in de update query?
- Genen als HOXA@ en UGT1A zijn officieel een erkend gensymbool maar zijn families van genen; ze hebben een NG per groep genen, maar een NM per gen, en de Mutalyzer SOAP call flipt omdat die geen NC slice kan maken.


HANDLEIDING
===========
- Moet zo geschreven worden, dat er van dezelfde source een HTML en PDF gegenereerd kan worden.
- Per pagina moet duidelijk zijn, welk level nodig is om deze feature te gebruiken, en vanaf welke versie dit is ingevoerd.
- Vanuit LOVD moet de Help of Documentation tab direct verwijzen naar de pagina in de handleiding over het scherm waar de gebruiker op dat moment in zit.


Update process
==============
* ALLES IN UTF-8!!!
* Laat export in 2.0 maken, die data al omzet. De vragen voor het omzetten van de data, gebeuren DAAR.
* De export wordt gedownload, en moet daarna in 3.0 geladen worden. Of SQL file met MD5 check?
* Klaar, de 2.0 kan verwijderd worden indien gewenst.


Needed before release
=====================
    Als mensen submitten (wat voor data dan ook), controleren of data al eerder in database gevonden is? Of data bijna gelijk hier aan?
        Aangevraagd door Raymond, en hij acht dit zeer belangrijk.
    Later een OFFLINE_MODE inbouwen, die geen contact op neemt met remote servers, maar toestaat dat alles handmatig wordt gedaan.
        Dit moet een (tijdelijke?) instelling zijn, en overal lekker irritant aangegeven worden, zodat mensen het niet gebruiken om van de standaarden af te kunnen wijken.
    Hoe kunnen we multiple select velden duidelijker maken?
        Standaard mouseover met uitleg? Standaard notes er bij?
        Opsplitsen in twee boxen waar entries heen gesleept kunnen worden?
        Omzetten naar lijst checkboxes?
    Astrid Out en Carli Tops zouden graag de mogelijkheid hebben om een overzicht te krijgen van individuals naar mutaties, i.e.
        in de database van GenX kunnen zoeken op (aanwezigheid van?) varianten in GenY.
    Default list_size moet onthouden worden in COOKIE, net zoals de hidden cols.
++++Check alle queries 'ns.
    Cols - check huidige omschrijvingen in DMD of shared LOVD install, wellicht anders nu.
        DB-ID column heet ID op het formulier.
+++ Kolommen verkeerd gemapped.
        Johan: country/ethnicity kolommen van individual naar variant (Ind2Var!).
            Individual/Origin/Geographic, Individual/Origin/Ethnic, Individual/Origin/Population
                Ertussen dan maar? Wacht ff hoor... de speciale variant overview werkt alleen op de Individual cols...
            (...) veel naar gevraagd wordt (Variant_Amino_acid_SIFT, Variant_Amino_acid_PolyPhen, Variant_Amino_acid_AlignGVGD, DNA-reported).
            Er is verwarring en overlap over de onderwerpen Allele, Individual/Occurence, Individual/Mutation/Origin, Individual/Mutation/Origin_De_Novo.
    Techniek nodig om de database dicht te zetten, tijdens de update.
        Johan wil een installatie dicht kunnen gooien (behalve hem en de DBA ofzo?), om tijdelijk te voorkomen dat submitters iets editen.
    Column type wizard:
        Select: waarde i.p.v. yes (-- select --) or no.
    Gebruikers de external sources laten beheren?
    Kunnen we bij de upgrade zien of een upgrade al gedaan is? Dat een foutmelding "duplicate key" ofzo ondervangen wordt, zodat ie doorgaat?
    Find & Replace:
        Allowing full regexp mode where you can build your own regular expression; submitting the form will first return
            all changes that will be made to the database, agreeing will actually perform the find & replace.
            This is related to the "asterisk wildcard" question of Raymond Dalgleish, April 2010.



OTHER:
    If family ID column present, report in unique variant overview how many entries in total AND how many families in total.
    Internationalization?
- Boven log entries een paar blokken plaatsen; per log eentje. JS er op, die search_name invult, en formulier submit.
  * Eventueel met highlight.
